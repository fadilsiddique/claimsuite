import{E as g}from"./EmptyState-CFTUbY7i.js";import{_ as f,a as h,r as c,o as a,c as n,b as e,F as l,g as u,ab as _,t as i,e as m,f as v,d as w,i as k,j as D}from"./index-ZyqR9LDf.js";const C={name:"ClaimDetail",components:{FeatherIcon:h,EmptyState:g},setup(){return{detailResource:D({url:"claimsuite.api.get_claim_detail"})}},computed:{claim(){return this.detailResource.data},claimType(){return this.parseRemark().type||"Expense Claim"},description(){return this.parseRemark().description||""},formattedAmount(){var s;return Number(((s=this.claim)==null?void 0:s.total_debit)||0).toLocaleString("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2})},formattedDate(){var t;return(t=this.claim)!=null&&t.posting_date?new Date(this.claim.posting_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):""},statusLabel(){var s,t;return((s=this.claim)==null?void 0:s.docstatus)===0?"Draft":((t=this.claim)==null?void 0:t.docstatus)===1?"Submitted":"Cancelled"},statusClass(){var s,t;return((s=this.claim)==null?void 0:s.docstatus)===0?"bg-gray-100 text-gray-700":((t=this.claim)==null?void 0:t.docstatus)===1?"bg-blue-50 text-blue-700":"bg-red-50 text-red-600"}},mounted(){this.fetchDetail()},methods:{fetchDetail(){const s=this.$route.params.name;s&&this.detailResource.submit({name:s})},parseRemark(){var d;const t=(((d=this.claim)==null?void 0:d.user_remark)||"").match(/^Expense Claim - (.+?) - (.+?) - (.+)$/);return t?{type:t[1],description:t[2],date:t[3]}:{}},formatCurrency(s){return Number(s).toLocaleString("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2})}}},R={class:"px-4 py-5"},E={key:0,class:"space-y-4"},F={class:"bg-white rounded-2xl p-4 border border-gray-100 animate-pulse"},j={class:"space-y-4"},S={class:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm mb-4 text-center"},A={class:"text-3xl font-bold text-gray-900 tabular-nums"},L={class:"text-sm text-gray-500 mt-1"},N={class:"bg-white rounded-2xl border border-gray-100 shadow-sm mb-4 overflow-hidden"},B={class:"divide-y divide-gray-50"},T={class:"flex items-center justify-between px-4 py-3.5"},V={class:"text-sm font-medium text-gray-900"},I={class:"flex items-center justify-between px-4 py-3.5"},z={class:"text-sm font-medium text-gray-900"},G={class:"flex items-center justify-between px-4 py-3.5"},O={class:"text-sm font-medium text-gray-900"},q={key:0,class:"px-4 py-3.5"},H={class:"text-sm text-gray-900"},J={class:"bg-white rounded-2xl border border-gray-100 shadow-sm mb-4 overflow-hidden"},K={class:"divide-y divide-gray-50"},M={class:"flex-1 min-w-0 mr-4"},P={class:"text-sm font-medium text-gray-900 truncate"},Q={class:"text-right shrink-0"},U={key:0,class:"text-sm font-semibold text-red-600 tabular-nums"},W={key:1,class:"text-sm font-semibold text-green-600 tabular-nums"},X=["href"];function Y(s,t,d,y,Z,r){const p=c("FeatherIcon"),x=c("EmptyState");return a(),n("div",R,[y.detailResource.loading&&!r.claim?(a(),n("div",E,[t[1]||(t[1]=e("div",{class:"bg-white rounded-2xl p-6 border border-gray-100 animate-pulse"},[e("div",{class:"h-8 bg-gray-100 rounded w-32 mb-2"}),e("div",{class:"h-4 bg-gray-50 rounded w-48"})],-1)),e("div",F,[e("div",j,[(a(),n(l,null,u(4,o=>e("div",{key:o,class:"flex justify-between"},[...t[0]||(t[0]=[e("div",{class:"h-4 bg-gray-100 rounded w-20"},null,-1),e("div",{class:"h-4 bg-gray-50 rounded w-28"},null,-1)])])),64))])])])):r.claim?(a(),n(l,{key:1},[e("div",S,[e("span",{class:_(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold mb-3",r.statusClass])},i(r.statusLabel),3),e("p",A," AED "+i(r.formattedAmount),1),e("p",L,i(r.claimType),1)]),e("div",N,[t[6]||(t[6]=e("div",{class:"px-4 py-3 border-b border-gray-50"},[e("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Details")],-1)),e("div",B,[e("div",T,[t[2]||(t[2]=e("span",{class:"text-sm text-gray-500"},"Reference",-1)),e("span",V,i(r.claim.name),1)]),e("div",I,[t[3]||(t[3]=e("span",{class:"text-sm text-gray-500"},"Date",-1)),e("span",z,i(r.formattedDate),1)]),e("div",G,[t[4]||(t[4]=e("span",{class:"text-sm text-gray-500"},"Company",-1)),e("span",O,i(r.claim.company),1)]),r.description?(a(),n("div",q,[t[5]||(t[5]=e("span",{class:"text-sm text-gray-500 block mb-1"},"Description",-1)),e("span",H,i(r.description),1)])):m("",!0)])]),e("div",J,[t[7]||(t[7]=e("div",{class:"px-4 py-3 border-b border-gray-50"},[e("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Account Entries")],-1)),e("div",K,[(a(!0),n(l,null,u(r.claim.accounts,(o,b)=>(a(),n("div",{key:b,class:"flex items-center justify-between px-4 py-3.5"},[e("div",M,[e("p",P,i(o.account),1)]),e("div",Q,[o.debit>0?(a(),n("p",U," DR "+i(r.formatCurrency(o.debit)),1)):m("",!0),o.credit>0?(a(),n("p",W," CR "+i(r.formatCurrency(o.credit)),1)):m("",!0)])]))),128))])]),e("a",{href:`/app/journal-entry/${r.claim.name}`,target:"_blank",class:"flex items-center justify-center gap-2 w-full h-12 bg-white border-2 border-gray-100 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"},[v(p,{name:"external-link",class:"w-4 h-4"}),t[8]||(t[8]=w(" Open in Desk ",-1))],8,X)],64)):(a(),k(x,{key:2,icon:"alert-circle",title:"Claim not found",message:"This claim may have been deleted or you don't have permission to view it"}))])}const te=f(C,[["render",Y]]);export{te as default};
