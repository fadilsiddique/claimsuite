import{E as g}from"./EmptyState-BVtqqc5G.js";import{_ as f,a as _,r as c,o as a,c as n,b as e,F as m,g as u,ab as h,t as i,e as d,f as v,d as w,i as k,j as D}from"./index-DvAD5O51.js";const C={name:"ClaimDetail",components:{FeatherIcon:_,EmptyState:g},setup(){return{detailResource:D({url:"claimsuite.api.get_claim_detail"})}},computed:{claim(){return this.detailResource.data},claimType(){return this.parseRemark().type||"Expense Claim"},description(){return this.parseRemark().description||""},formattedAmount(){var r;return Number(((r=this.claim)==null?void 0:r.total_debit)||0).toLocaleString("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2})},formattedDate(){var t;return(t=this.claim)!=null&&t.posting_date?new Date(this.claim.posting_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):""},statusLabel(){var r,t;return((r=this.claim)==null?void 0:r.docstatus)===0?"Draft":((t=this.claim)==null?void 0:t.docstatus)===1?"Submitted":"Cancelled"},statusClass(){var r,t;return((r=this.claim)==null?void 0:r.docstatus)===0?"bg-gray-100 text-gray-700":((t=this.claim)==null?void 0:t.docstatus)===1?"bg-blue-50 text-blue-700":"bg-red-50 text-red-600"}},mounted(){this.fetchDetail()},methods:{fetchDetail(){const r=this.$route.params.name;r&&this.detailResource.submit({name:r})},parseRemark(){var l;const t=(((l=this.claim)==null?void 0:l.user_remark)||"").match(/^Expense Claim - (.+?) - (.+?) - (.+)$/);return t?{type:t[1],description:t[2],date:t[3]}:{}},formatCurrency(r){return Number(r).toLocaleString("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2})}}},j={class:"px-4 py-5"},R={key:0,class:"space-y-4"},E={class:"bg-white rounded-2xl p-4 border border-gray-100 animate-pulse"},F={class:"space-y-4"},S={class:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm mb-4 text-center"},A={class:"text-3xl font-bold text-gray-900 tabular-nums"},L={class:"text-sm text-gray-500 mt-1"},N={class:"bg-white rounded-2xl border border-gray-100 shadow-sm mb-4 overflow-hidden"},B={class:"divide-y divide-gray-50"},T={class:"flex items-center justify-between px-4 py-3.5"},V={class:"text-sm font-medium text-gray-900"},I={class:"flex items-center justify-between px-4 py-3.5"},z={class:"text-sm font-medium text-gray-900"},G={class:"flex items-center justify-between px-4 py-3.5"},O={class:"text-sm font-medium text-gray-900"},P={key:0,class:"flex items-center justify-between px-4 py-3.5"},q={class:"text-sm font-medium text-gray-900"},H={key:1,class:"px-4 py-3.5"},J={class:"text-sm text-gray-900"},K={class:"bg-white rounded-2xl border border-gray-100 shadow-sm mb-4 overflow-hidden"},M={class:"divide-y divide-gray-50"},Q={class:"flex-1 min-w-0 mr-4"},U={class:"text-sm font-medium text-gray-900 truncate"},W={class:"text-right shrink-0"},X={key:0,class:"text-sm font-semibold text-red-600 tabular-nums"},Y={key:1,class:"text-sm font-semibold text-green-600 tabular-nums"},Z=["href"];function $(r,t,l,y,ee,s){const x=c("FeatherIcon"),p=c("EmptyState");return a(),n("div",j,[y.detailResource.loading&&!s.claim?(a(),n("div",R,[t[1]||(t[1]=e("div",{class:"bg-white rounded-2xl p-6 border border-gray-100 animate-pulse"},[e("div",{class:"h-8 bg-gray-100 rounded w-32 mb-2"}),e("div",{class:"h-4 bg-gray-50 rounded w-48"})],-1)),e("div",E,[e("div",F,[(a(),n(m,null,u(4,o=>e("div",{key:o,class:"flex justify-between"},[...t[0]||(t[0]=[e("div",{class:"h-4 bg-gray-100 rounded w-20"},null,-1),e("div",{class:"h-4 bg-gray-50 rounded w-28"},null,-1)])])),64))])])])):s.claim?(a(),n(m,{key:1},[e("div",S,[e("span",{class:h(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold mb-3",s.statusClass])},i(s.statusLabel),3),e("p",A," AED "+i(s.formattedAmount),1),e("p",L,i(s.claimType),1)]),e("div",N,[t[7]||(t[7]=e("div",{class:"px-4 py-3 border-b border-gray-50"},[e("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Details")],-1)),e("div",B,[e("div",T,[t[2]||(t[2]=e("span",{class:"text-sm text-gray-500"},"Reference",-1)),e("span",V,i(s.claim.name),1)]),e("div",I,[t[3]||(t[3]=e("span",{class:"text-sm text-gray-500"},"Date",-1)),e("span",z,i(s.formattedDate),1)]),e("div",G,[t[4]||(t[4]=e("span",{class:"text-sm text-gray-500"},"Company",-1)),e("span",O,i(s.claim.company),1)]),s.claim.project?(a(),n("div",P,[t[5]||(t[5]=e("span",{class:"text-sm text-gray-500"},"Project",-1)),e("span",q,i(s.claim.project_name||s.claim.project),1)])):d("",!0),s.description?(a(),n("div",H,[t[6]||(t[6]=e("span",{class:"text-sm text-gray-500 block mb-1"},"Description",-1)),e("span",J,i(s.description),1)])):d("",!0)])]),e("div",K,[t[8]||(t[8]=e("div",{class:"px-4 py-3 border-b border-gray-50"},[e("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Account Entries")],-1)),e("div",M,[(a(!0),n(m,null,u(s.claim.accounts,(o,b)=>(a(),n("div",{key:b,class:"flex items-center justify-between px-4 py-3.5"},[e("div",Q,[e("p",U,i(o.account),1)]),e("div",W,[o.debit>0?(a(),n("p",X," DR "+i(s.formatCurrency(o.debit)),1)):d("",!0),o.credit>0?(a(),n("p",Y," CR "+i(s.formatCurrency(o.credit)),1)):d("",!0)])]))),128))])]),e("a",{href:`/app/journal-entry/${s.claim.name}`,target:"_blank",class:"flex items-center justify-center gap-2 w-full h-12 bg-white border-2 border-gray-100 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"},[v(x,{name:"external-link",class:"w-4 h-4"}),t[9]||(t[9]=w(" Open in Desk ",-1))],8,Z)],64)):(a(),k(p,{key:2,icon:"alert-circle",title:"Claim not found",message:"This claim may have been deleted or you don't have permission to view it"}))])}const re=f(C,[["render",$]]);export{re as default};
